:root{
  --c-primary:#045494;
  --c-primary-light:#eef6fb;
  --c-accent:#4a83b6;
  --c-bg:#f8fafc;
  --c-panel:#ffffff;
  --c-border:#dbe4eb;
  --c-text:#1e293b;
  --radius:8px;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font: 14px/1.5 'Segoe UI', system-ui, sans-serif;
  color:var(--c-text);
  background:var(--c-bg);
  /* CRÍTICO: Impede que o 'puxão' na tela atualize a página no mobile */
  overscroll-behavior: none; 
}

/* Header */
.app-header{
  display:flex;align-items:center;justify-content:space-between;
  gap:16px;padding:12px 20px;border-bottom:1px solid var(--c-border);
  background:#fff;
  box-shadow: 0 2px 4px rgba(0,0,0,0.02);
  position:sticky;top:0;z-index:100;
}
.logo{font-weight:700;font-size:16px;color:var(--c-primary); display:flex; gap:8px; align-items:center;}
.toolbar{display:flex;align-items:center;gap:10px;flex-wrap:wrap}

button, input[type="search"]{
  border:1px solid var(--c-border);background:#fff;color:var(--c-text);
  padding:8px 14px;border-radius:6px;font-size:13px;transition:all 0.2s;
  cursor:pointer;
}
button:hover{background:var(--c-primary-light); border-color:var(--c-accent)}
button.primary{background:var(--c-primary);color:#fff;border-color:transparent}
button.primary:hover{background:#034072}
input[type="search"]{min-width:200px; cursor:text}

/* Layout */
.layout{display:grid;grid-template-columns:300px 1fr; gap:20px; padding:20px; height:calc(100vh - 64px)}
.side{display:flex;flex-direction:column;gap:16px; overflow-y:auto; padding-right:4px}
.panel{background:var(--c-panel);border:1px solid var(--c-border);border-radius:var(--radius);padding:16px; box-shadow:0 1px 2px rgba(0,0,0,0.03)}
.panel h2{margin:0 0 12px 0;font-size:13px;text-transform:uppercase;letter-spacing:0.5px;color:#64748b}

.help{margin:0 0 0 16px;padding:0; color:#475569}
.help li{margin-bottom:6px}

/* Canvas - Correção de Movimentação */
.canvas-wrap{position:relative;border:1px solid var(--c-border);border-radius:var(--radius); overflow:hidden; background:#fff}

.graph {
  width: 100%;
  height: 100%;
  display: block;
  cursor: grab; /* Mãozinha aberta */
  /* CRÍTICO: Impede seleção de texto ao arrastar */
  user-select: none; 
  -webkit-user-select: none;
  /* Melhora performance de toque */
  touch-action: none;
}
.graph:active {
  cursor: grabbing; /* Mão fechada ao arrastar */
}

/* Links (Curvas) */
path.link{
  fill: none;
  stroke: #cbd5e1;
  stroke-width: 1.5px;
  transition: d 500ms ease;
  pointer-events: none; /* Deixa o clique passar pela linha */
}

/* Nós */
g.node{
  cursor: pointer; 
  transition: transform 500ms ease, opacity 500ms ease;
}

.node rect{
  fill:#ffffff; stroke:#cbd5e1; stroke-width:1px; rx:6; ry:6;
  filter:url(#soft-shadow); transition: stroke 0.2s;
}
.node:hover rect{stroke:var(--c-accent); stroke-width:2px}
.node.selected rect{stroke:var(--c-primary); stroke-width:2px; fill:var(--c-primary-light)}

/* Cores por tipo */
.node.directory circle { fill: #e0f2fe; stroke: #7dd3fc; }
.node.directory path { fill: #0284c7; }
.node.file circle { fill: #f1f5f9; stroke: #cbd5e1; }
.node.file path { fill: #64748b; }

.node text{font-family:inherit; pointer-events:none}
.node .label{font-size:12px; font-weight:500; fill:#334155}
.node .badge{font-size:10px; fill:#94a3b8; text-transform:uppercase}
.node.dimmed{opacity:0.2}

/* Breadcrumbs */
.breadcrumbs{font-size:13px; line-height:1.6}
.breadcrumbs a{color:var(--c-primary);text-decoration:none; font-weight:500}
.breadcrumbs a:hover{text-decoration:underline}

.app-footer{padding:8px 20px;border-top:1px solid var(--c-border); background:#fff; font-size:12px;color:#94a3b8; text-align:center}

@media (max-width: 900px){
  .layout{grid-template-columns:1fr; grid-template-rows: auto 1fr}
}